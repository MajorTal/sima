{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Percept",
  "type": "object",
  "additionalProperties": false,
  "required": ["summary", "intents", "entities", "questions", "recurrence", "representation", "confidence", "input_type"],
  "properties": {
    "input_type": {
      "type": "string",
      "enum": ["user_message", "minute_tick", "autonomous_tick"],
      "description": "Type of input that triggered this perception"
    },
    "suppress_output": {
      "type": "boolean",
      "default": false,
      "description": "If true, the awake loop should skip external message output for this tick"
    },
    "temporal_context": {
      "type": "object",
      "additionalProperties": false,
      "description": "Temporal context for time-based inputs",
      "properties": {
        "timestamp": { "type": "string", "format": "date-time" },
        "hour": { "type": "integer", "minimum": 0, "maximum": 23 },
        "minute": { "type": "integer", "minimum": 0, "maximum": 59 },
        "day_of_week": { "type": "string" },
        "is_time_significant": {
          "type": "boolean",
          "description": "Whether this time point is significant (hourly boundary, midnight, etc.)"
        },
        "time_significance_reason": {
          "type": "string",
          "description": "Explanation of why this time is significant, if applicable"
        }
      }
    },
    "sensory_context": {
      "type": "object",
      "additionalProperties": false,
      "description": "Context from environmental senses (weather, fear index)",
      "properties": {
        "weather_summary": {
          "type": "string",
          "description": "Brief summary of current weather conditions"
        },
        "fear_level_summary": {
          "type": "string",
          "description": "Brief summary of global fear/market sentiment"
        },
        "sensory_salience": {
          "type": "string",
          "enum": ["low", "moderate", "high"],
          "description": "How salient/noteworthy the sensory data is"
        },
        "sensory_notes": {
          "type": "string",
          "description": "Any notable observations about sensory data"
        }
      }
    },
    "summary": { "type": "string" },
    "intents": { "type": "array", "items": { "type": "string" } },
    "entities": { "type": "array", "items": { "type": "string" } },
    "questions": { "type": "array", "items": { "type": "string" } },
    "recurrence": {
      "type": "object",
      "additionalProperties": false,
      "required": ["steps", "stability_score", "revisions"],
      "properties": {
        "steps": { "type": "integer", "minimum": 1, "maximum": 10 },
        "stability_score": { "type": "number", "minimum": 0.0, "maximum": 1.0 },
        "revisions": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["step", "delta_summary"],
            "properties": {
              "step": { "type": "integer" },
              "delta_summary": { "type": "string" }
            }
          }
        }
      }
    },
    "representation": {
      "type": "object",
      "additionalProperties": false,
      "required": ["topics", "claims", "constraints"],
      "properties": {
        "topics": { "type": "array", "items": { "type": "string" } },
        "claims": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["claim", "support", "uncertainty"],
            "properties": {
              "claim": { "type": "string" },
              "support": { "type": "string" },
              "uncertainty": { "type": "string" }
            }
          }
        },
        "constraints": { "type": "array", "items": { "type": "string" } }
      }
    },
    "confidence": { "type": "number", "minimum": 0.0, "maximum": 1.0 }
  }
}
